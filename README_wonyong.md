# shttpd 만들기
---
- 개요 : python 에 SimpleHTTPServer 라는 모듈이 있습니다. 유사한 프로그램을 작성합니다.
- 구현 기능

  1. 포트번호 인자로 받아 실행
  2. 포트번호를 listen. 멀티세션은 선택?
  3. 실행된 디렉토리를 루트로 지정 - 요청에 대한 String parsing 필요
  4. GET METHOD 구현
  5. POST( + Multipart/form-data ) METHOD 구현
  6. DELETE METHOD 구현
  7. 로깅 기능 구현 - 시간, 요청 method, 경로, 요청 결과 응답 코드, 응답 크기, 응답 시간
  8. 요청 처리용 String Parser 구현

- GET METHOD service
  
  1. 파일이 존재하면 파일 컨텐츠를 응답. - 응답 인코딩 설정 필요
  2. 응답 헤더 주의하여 응답 작성
  3. 디렉토리 계층 확인 기능 구현
  4. 읽기 권한 관리 기능 구현 - 클라이언트의 권한? 서버 내부의 권한? 서버 내부 권한 문제라면 4XX이 아니라 5XX이어야 한다.
  5. 루트에 대한 GET 요청 시 폴더 내부 목록을 응답 - 트리 구조 응답? 단순히 ls 구현?

- POST METHOD service

  1. 루트 폴더에 바로 업로드 파일 저장
  2. 저장 권한 관리 기능 필요
  3. 루트에 같은 이름의 파일 있는지 확인 후 저장 로직 수행
  4. 헤더 분석으로 multipart/form-data 제외한 요청은 수행하지 않는다.

- DELETE METHOD service

  1. 파일 삭제 기능 구현 - 멀티세션 서버 구성시 동시성 문제 발생 가능 -> Atomic 로직 구현 필요.
  2. 파일 삭제 권한 관리 필요

- COMMON service

  1. 로깅 기능 구현

- Status Code

  1. 200 : 존재하는 파일에 대한 GET 요청시
  2. 204 : 요청한 삭제 요청이 유효하고 진행 완료 후 응답 | 존재하지 않는 파일에 대한 삭제 요청 시
  4. 403 : 읽기 권한이 없는 파일 요청시 | 삭제가 불가능한 파일에 대한 삭제 요청 시
  5. 404 : 존재하지 않는 파일이나 경로 요청시
  6. 405 : Multipart 업로드 요청이 아닌 POST 요청시 | 작성하지 않은 메소드 요청시
  7. 409 : Multipart 업로드 요청 중 파일명 중복 발생 시
  8. 5XX : 임의의 내부 예외에 대한 응답 코드 작성 필요.

- 구현 아이디어 
  
  1. 클라이언트의 권한 확인 - 요청 헤더에 Auth 관련 헤더 추가하여 테스트
  2. 파일에 권한 부여 - 파일명, 유저 리스트 맵 테이블 구성
  3. 요청을 파싱하여 dao 생성 및 하위 서비스 클래스로 전달. 기능 수행을 위임.
  
---
  
  
